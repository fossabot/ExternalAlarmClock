apply plugin: 'java'
apply plugin: 'gradle-one-jar'
apply plugin: 'application'

mainClassName = "com.externalalarmclock.alarmclock.AlarmClockApplication"

project.ext {
    configPath = "$project.projectDir/src/dist/conf/"
}

run {
 args 'server', configPath + 'alarmclock.yml'
}

dependencies {
    compile 'io.dropwizard:dropwizard-core:1.3.7'
    compile project(':lib.externalalarmclock')
	compile project(':test')
	compile 'de.spinscale.dropwizard:dropwizard-jobs-core:3.0.0'
}

repositories {
  mavenLocal()
}

sourceCompatibility = "1.8"
targetCompatibility = "1.8"

// UTF-8 should be standard by now. So use it!
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

task oneJar(type: OneJar) {
    mainClass = mainClassName
}

artifacts {
    oneJar
}