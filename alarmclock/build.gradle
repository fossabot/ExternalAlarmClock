apply plugin: 'java'
apply plugin: 'gradle-one-jar'
apply plugin: 'application'

mainClassName = "com.externalalarmclock.alarmclock.AlarmClockApplication"

project.ext {
    configPath = "$project.projectDir/src/dist/conf/"
}

run {
 args 'server', configPath + 'alarmclock.yml'
}

dependencies {
    compile 'io.dropwizard:dropwizard-core:1.0.5'
    compile project(':lib.externalalarmclock')
	compile project(':test')
}

repositories {
  mavenLocal()
}

sourceCompatibility = "1.8"
targetCompatibility = "1.8"

// UTF-8 should be standard by now. So use it!
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

task oneJar(type: OneJar) {
    mainClass = mainClassName
}

artifacts {
    oneJar
}